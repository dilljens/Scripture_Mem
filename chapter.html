<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chapter Overview</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1 id="chapter-title">
        <span id="book-link" style="cursor: pointer; color: blue;"></span>
    </h1>
    <div id="verses-container" class="grid-container"></div>

    <script src="data.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const bookName = urlParams.get('book') || "Isaiah"; // Now dynamically fetched
            const chapterNumber = urlParams.get('chapter') || "1"; // Default to Chapter 1 if no parameter

            const bookLink = document.getElementById('book-link');
            const chapterTitle = document.getElementById('chapter-title');
            const versesContainer = document.getElementById('verses-container');

            // Dynamic title setup
            bookLink.textContent = bookName;
            bookLink.onclick = function() {
                window.location.href = 'index.html'; // Go back to index
            };
            chapterTitle.appendChild(bookLink);
            chapterTitle.append(` - Chapter ${chapterNumber}`);

            // Fetch and display verses
            const verses = books[bookName] && books[bookName]["Chapter " + chapterNumber];
            if (!verses) {
                versesContainer.textContent = 'No verses available for this chapter.';
                return;
            }

            verses.forEach((verse, index) => {
                const verseBox = document.createElement('div');
                verseBox.className = 'verse-box';
                verseBox.textContent = extractFirstLetters(verse);
                verseBox.onclick = () => {
                    window.location.href = `verse.html?book=${bookName}&chapter=${chapterNumber}&verse=${index + 1}`;
                };
                versesContainer.appendChild(verseBox);
            });

            function extractFirstLetters(verse) {
                const pattern = /\b(\w)([\w'-]*)([.,;:!?]*)/g;
                let result = '', match;
                while (match = pattern.exec(verse)) {
                    result += match[1] + (match[3] || '');
                }
                return result;
            }
        });
    </script>
</body>
</html>
